<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="svg-root" width="100%" height="100%" baseProfile="tiny" onload="testSVGLocatable()" version="1.1" viewBox="0 0 480 360"><d:SVGTestCase xmlns:d="http://www.w3.org/2000/02/svg/testsuite/description/" author="AN" reviewer="AE,ED" status="accepted" template-version="1.3" testname="$RCSfile: types-dom-01-b.svg,v $" version="$Revision: 1.6 $"><d:testDescription xmlns="http://www.w3.org/1999/xhtml" href="http://www.w3.org/TR/SVG11/types.html#BasicDOMInterfaces"><p>This test checks all the methods and properties of the SVGLocatable interface. Note the use of nested svg elements and testing against different elements in the hierarchy. Note that the values of .getScreenCTM() and .getCTM() can only be tested correctly if they are in the html-based test or the width and height of the root element is explicitly set to 480x360. The methods .getScreenCTM() and .getCTM() are tested from the rotated text element, the method .getBBox(), .getTransformToElement() is tested between the rotated text and its parent group, the method .getBBox() and the properties .farthestViewportElement and .nearestViewportElement are tested on the blue circle.</p></d:testDescription><d:operatorScript xmlns="http://www.w3.org/1999/xhtml"><p>Run the test. No interaction required. Make sure scripting is enabled.</p></d:operatorScript><d:passCriteria xmlns="http://www.w3.org/1999/xhtml"><p>For the test to pass, the values generated by script must match the values provided in the png image. The correct values are:</p><p>.getScreenCTM() for id &quot;rotText&quot;: 0.42,0.42,-0.42,0.42,70.00,-60.00</p><p>.getCTM() for id &quot;rotText&quot;: 0.42,0.42,-0.42,0.42,70.00,-60.00</p><p>.getTransformToElement() between id &quot;rotText&quot; and id &quot;parentGroup&quot;: 0.42,0.42,-0.42,0.42,0.00,0.00</p><p>.getBBox() for &apos;blueCircle&apos;: .x=-50,.y=-50,.width=100,.height=100</p><p>.farthestViewportElement of blueCircle=svg-root</p><p>.nearestViewportElement of blueCircle=nestedSVG</p></d:passCriteria></d:SVGTestCase><title id="test-title">$RCSfile: types-dom-01-b.svg,v $</title><defs><font-face font-family="SVGFreeSansASCII" unicode-range="U+0-7F"><font-face-src><font-face-uri xlink:href="../resources/SVGFreeSans.svg#ascii"/></font-face-src></font-face></defs><g id="test-body-content" font-family="SVGFreeSansASCII,sans-serif" font-size="18"><script type="text/ecmascript">function testSVGLocatable() { var rotText = document.getElementById(&quot;rotatedText&quot;); var blueCircle = document.getElementById(&quot;blueCircle&quot;) var matr = rotText.getScreenCTM(); document.getElementById(&quot;result1&quot;).firstChild.nodeValue = &quot;.getScreenCTM(): &quot; + matr.a.toFixed(2) + &quot;,&quot; + matr.b.toFixed(2) + &quot;,&quot; + matr.c.toFixed(2) + &quot;,&quot; + matr.d.toFixed(2) + &quot;,&quot; + matr.e.toFixed(2) + &quot;,&quot; + matr.f.toFixed(2); var matr = rotText.getCTM(); document.getElementById(&quot;result2&quot;).firstChild.nodeValue = &quot;.getCTM(): &quot; + matr.a.toFixed(2) + &quot;,&quot; + matr.b.toFixed(2) + &quot;,&quot; + matr.c.toFixed(2) + &quot;,&quot; + matr.d.toFixed(2) + &quot;,&quot; + matr.e.toFixed(2) + &quot;,&quot; + matr.f.toFixed(2); var matr = rotText.getTransformToElement(document.getElementById(&quot;parentGroup&quot;)); document.getElementById(&quot;result3&quot;).firstChild.nodeValue = &quot;.getTransformToElement(): &quot; + matr.a.toFixed(2) + &quot;,&quot; + matr.b.toFixed(2) + &quot;,&quot; + matr.c.toFixed(2) + &quot;,&quot; + matr.d.toFixed(2) + &quot;,&quot; + matr.e.toFixed(2) + &quot;,&quot; + matr.f.toFixed(2); var bbox = blueCircle.getBBox(); document.getElementById(&quot;result4&quot;).firstChild.nodeValue = &quot;.getBBox() for &apos;blueCircle&apos;: .x=&quot;+bbox.x+&quot;,.y=&quot;+bbox.y+&quot;,.width=&quot;+bbox.width+&quot;,.height=&quot;+bbox.height; document.getElementById(&quot;result5&quot;).firstChild.nodeValue = &quot;.farthestViewportElement of blueCircle=&quot;+blueCircle.farthestViewportElement.getAttributeNS(null,&quot;id&quot;); document.getElementById(&quot;result6&quot;).firstChild.nodeValue = &quot;.nearestViewportElement of blueCircle=&quot;+blueCircle.nearestViewportElement.getAttributeNS(null,&quot;id&quot;); }</script><g font-size="12"><g id="parentGroup" transform="translate(70,-60)"><text id="rotatedText" x="30" y="150" font-size="20" transform="scale(0.6),rotate(45)">Rotated Text for testing SVGLocatable</text><text id="otherText" x="100" y="130" font-size="20" transform="scale(0.7)">Some other text with id &apos;otherText&apos;</text><svg id="nestedSVG" width="110" height="110" x="200" y="100" viewBox="-55 -55 110 110"><circle id="blueCircle" cx="0" cy="0" r="50" fill="#00f"/></svg></g></g></g><g font-family="SVGFreeSansASCII,sans-serif" font-size="32"><text id="revision" x="10" y="340" fill="#000" stroke="none">$Revision: 1.6 $</text></g><rect id="test-frame" width="478" height="358" x="1" y="1" fill="none" stroke="#000"/></svg>